<!-- templates/home.html -->
{% extends 'base.html' %}
{% load static %}
{% block title %}Wallet {{wallet.address}}{% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'walletview/css/wallet.css' %}">
  <div class="w3-card-4">
    <header class="w3-container w3-blue">
      <h4>{{wallet.address}}</h4>
    </header>
      <div class="w3-container">
      
      </div
      <!-- Tokens -->
      <div class="w3-container">
      <h4>Tokens</h4>
       <table class="w3-table"> 
        <tr>
          <th>Name</th>
          <th>Balance</th>
          <th>Price</th>
          <th>Value</th>
        </tr>
        {% for token in wallet.get_tokens %}
          {% if not token.token.liquidity and not token.balance_calculated == 0.0 %}
            <tr>
            <td><a href="{% url 'wallet_token' wallet.address token.token.id %}">{{token.token.name}} ({{token.token.symbol}})</a></td>
            <td><span data-tooltip="up" aria-label="{{token.fetched}}">{{token.balance_human}}</span></td>
            <td><span data-tooltip="up" aria-label="{{token.get_last_value.fetched}}">{{token.get_last_value.price_human}}</span></td>
            <td><span data-tooltip="up" aria-label="{{token.fetched}}">{{token.value_human}}</span></td>
           </tr>      
          {% endif %}  
        {% endfor %}
        </table>
      </div>

      <!-- Liquidity -->
      <div class="w3-container">
      <h4>Liquidities</h4>
       <table class="w3-table"> 
        <tr>
          <th>Pair</th>
          <th>Balance</th>
          <th>Value</th>
          <th>Exchange</th>
        </tr>
        {% for liquidity in wallet.get_liquidities %}
          {% if not liquidity.balance == 0.0 %}
            <tr>
            <td>{{liquidity.liquidity.pair}}</td>
            <td><span data-tooltip="up" aria-label="{{liquidity.fetched}}">{{liquidity.balance_human}}</span></td>
            <td><span data-tooltip="up" aria-label="{{liquidity.fetched}}">{{liquidity.value_human}}</span></td>
            <td>{{liquidity.liquidity.exchange.name}}</td>
           </tr>      
          {% endif %}  
        {% endfor %}
        </table>
      </div>


    <footer class="w3-container w3-blue">
    <div class="w3-row">
    <div class="w3-half">
    <h5><span data-tooltip="up" aria-label="{{wallet.get_balance.fetched}}">xDai: {{wallet.get_balance.xdai_human}}</span></h5>
    </div>
    <div class="w3-half w3-right-align">
    <h5>Total: {{wallet.value_human}}</h5>
    </div>
    </div>
    </footer>
  </div>
{% endblock %}